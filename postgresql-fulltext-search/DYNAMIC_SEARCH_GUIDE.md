# 动态搜索功能实现指南

## 概述

新的动态搜索功能实现了基于数据库内容的智能匹配，替代了之前的静态关键词匹配。

## 核心特性

### 1. 动态关键词提取

-   从现有模板中提取高频关键词
-   从实际使用数据中提取关键词
-   基于业务描述动态生成关键词

### 2. 数据库驱动的评分算法

-   使用 PostgreSQL 的相似度算法
-   考虑使用频率和时间衰减
-   多维度权重计算

### 3. 降级机制

-   主查询失败时自动降级
-   简化查询保证系统稳定性

## 权重分配策略

-   **动态关键词匹配**：1.5（最高权重）
-   **文件类型匹配**：1.2（中等权重）
-   **使用频率权重**：0.3（基础权重）
-   **基础文本相似度**：0.8（最低权重）

## 部署步骤

1. 执行数据库迁移脚本
2. 重新编译项目
3. 重启应用

## 优势

1. **动态性**：关键词从实际数据中提取
2. **准确性**：使用 PostgreSQL 相似度算法
3. **智能性**：考虑使用频率和时间衰减
4. **可靠性**：具备降级机制
5. **性能**：优化的数据库查询
6. **可维护性**：清晰的代码结构
